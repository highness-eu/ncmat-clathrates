# ncrystal-plugin-ClathrateHydrateData

## Generation of NCMAT files

### Clathrates

The NCMAT files of clathrates are generated by Shuqi Xu on behalf of the Work
Package 2 of the HighNESS project using the NCrystal tool NCMATComposer.

The cif files and the phonon density of states (PDOS) are provided by Marco
Bernasconi and Omar Abou El Kheir from Università di Milano-Bicocca. Details can
be found in the head of each NCMAT file.

### Paramagnetic oxygen

We firstly prepared a ncmat file for the Gamma phase of solid oxygen and then
added a supplementray section `@CUSTOM_MAGSCAT` to activate the inelastic
magnetic scattering physics which is implemented in the plugin:
https://github.com/highness-eu/ncplugin-MagScat.

The PDOS of oxygen for different configurations of clathrates, e.g,
O2-clathrate, THF/TDF+O2-clathrate，are extracted from the corresponding
NCMAT files.

## Combining paramagnetic oxygen into clathrates

The objective is to generate a NCMAT file of clathrate whose enclathrated oxygen
molecules have magnetic effects. To do so, we prepared an empty clathrate
hydrate, and then combined with the paramagnetic oxygen using the "@OTHERPHASES"
section.

## How to install:

In principle this is simply one command:

```
pip install git+https://github.com/highness-eu/ncmat-clathrates
```

After that you will have access to the relevant data files. Run `nctool -b` to
see the provided files (those having the form
`"plugins::ClathrateHydrate/*.ncmat"`).

HOWEVER, note that installing this plugin automatically also installs the
`ncrystal-plugin-MagScat` package, which requires compilation. For this to work,
you must have the necessary build tools (e.g.  cmake and a C++ compiler)
available in your environment. One cross-platform way to get that is to setup a
conda environment which has everything, including ncrystal:

```
name: myenv
channels:
  - nodefaults
  - conda-forge
dependencies:
  - python
  - pip
  - cxx-compiler
  - c-compiler
  - cmake
  - make
  - ncrystal >=4.1.4
  - pip:
    - git+https://github.com/highness-eu/ncmat-clathrates
```

If you store the above contents in a file called `myenv.yml` you can create
the conda env with `conda env create -f myenv.yml` and afterwards activate it
with `conda activate myenv`. Then you will have an environment with both
NCrystal, and the ClathrateHydrateData and MagScat plugins.

## How to use

An example is given: https://github.com/highness-eu/ncmat-clathrates/blob/main/plot_ver_do2-cla.ipynb
